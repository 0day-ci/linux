// SPDX-License-Identifier: GPL-2.0 or MIT
//
// Device Tree Source for General Electric B1x5v2
//
// Copyright 2018-2021 General Electric Company
// Copyright 2018-2021 Collabora

#include <dt-bindings/input/input.h>
#include "imx6dl-b1x5pv2.dtsi"

/ {
	reg_3v3_acm: regulator-3v3-acm {
		compatible = "regulator-fixed";
		regulator-name = "3V3 ACM";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		regulator-always-on;
		vin-supply = <&reg_3v3>;
	};
};

&i2c1 {
	tca6416: gpio-controller@21 {
		compatible = "ti,tca6416";
		reg = <0x21>;
		gpio-controller;
		#gpio-cells = <2>;
		vcc-supply = <&reg_3v3_acm>;

		/*
		 * TCA6424 cannot handle low type interrupts at the moment and
		 * it cannot be added without quite a few hacks. Since this
		 * controller does not have any input type GPIOs, pretend that
		 * the interrupt pin is unconnected.
		 */
		//interrupt-parent = <&tca6424a>;
		//interrupts = <1 IRQ_TYPE_LEVEL_LOW>;
		//interrupt-controller;
		//#interrupt-cells = <2>;

		reset-gpios = <&tca6424a 9 GPIO_ACTIVE_LOW>;

		gpio-line-names = "ACM1_EN", "ACM1_CL0", "ACM1_CL1", "ACM1_CL2",
				  "", "ACM2_EN", "ACM2_CL0", "ACM2_CL1",
				  "ACM2_CL2", "", "", "",
				  "", "", "", "";
	};
};

&i2c5 {
	mpl3115a2: pressure-sensor@60 {
		compatible = "fsl,mpl3115";
		reg = <0x60>;

		vcc-supply = <&reg_3v3_acm>;

		/* The MPL3115 binding does not yet support interrupts */
		//interrupt-parent = <&tca6424a>;
		//interrupts = <22 IRQ_TYPE_EDGE_RISING 23 IRQ_TYPE_EDGE_RISING>;
	};
};
