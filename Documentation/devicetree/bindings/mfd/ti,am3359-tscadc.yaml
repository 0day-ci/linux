# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mfd/ti,am3359-tscadc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Bindings for Touchscreen + ADC MFD IPs on TI SoCs

maintainers:
  - Vignesh Raghavendra <vigneshr@ti.com>

properties:
  compatible:
    oneOf:
      - items:
          - enum:
              - ti,am654-tscadc
          - const: ti,am3359-tscadc
      - const: ti,am3359-tscadc

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1

  clocks:
    maxItems: 1

  clock-names:
    const: "adc_tsc_fck"

  dmas:
    maxItems: 2

  dma-names:
    items:
      - const: fifo0
      - const: fifo1

  power-domains: true

  tsc:
    $ref: ../input/touchscreen/ti,am3359-tsc.yaml
    description:
      Bindings for Touchscreen part of the MFD

  adc:
    $ref: ../iio/adc/ti,am3359-adc.yaml
    description:
      Bindings for ADC part of the MFD

required:
  - compatible
  - reg
  - interrupts

additionalProperties: false

if:
  properties:
    compatible:
      contains:
        const: ti,am654-tscadc
then:
  properties:
    tsc: false

examples:
  - |
    tscadc@44e0d000 {
      compatible = "ti,am3359-tscadc";
      reg = <0x44e0d000 0x1000>;
      interrupts = <16>;
        tsc {
          compatible = "ti,am3359-tsc";
          ti,wires = <4>;
          ti,x-plate-resistance = <200>;
          ti,coordinate-readouts = <5>;
          ti,wire-config = <0x00 0x11 0x22 0x33>;
          ti,charge-delay = <0x400>;
        };

      adc {
        compatible = "ti,am3359-adc";
        ti,adc-channels = <4 5 6 7>;
        ti,chan-step-opendelay = <0x098 0x3ffff 0x098 0x0>;
        ti,chan-step-sampledelay = <0xff 0x0 0xf 0x0>;
        ti,chan-step-avg = <16 2 4 8>;
        #io-channel-cells = <1>;
      };
    };
