# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/i2c/i2c-mt65xx.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: MediaTek I2C Controller

maintainers:
  - Qii Wang <qii.wang@mediatek.com>
  - Matthias Brugger <matthias.bgg@gmail.com>

allOf:
  - $ref: /schemas/i2c/i2c-controller.yaml#

properties:
  $nodename:
    pattern: "^i2c@[0-9a-f]+$"

  compatible:
    oneOf:
      - enum:
          - mediatek,mt2712-i2c
          - mediatek,mt6577-i2c
          - mediatek,mt6589-i2c
          - mediatek,mt7622-i2c
          - mediatek,mt8173-i2c
          - mediatek,mt8183-i2c
          - mediatek,mt8192-i2c
      - items:
          - enum:
              - mediatek,mt2701-i2c
              - mediatek,mt6797-i2c
              - mediatek,mt7623-i2c
          - const: mediatek,mt6577-i2c
      - items:
          - enum:
              - mediatek,mt7629-i2c
              - mediatek,mt8516-i2c
          - const: mediatek,mt2712-i2c

  clocks:
    minItems: 2
    maxItems: 4
    items:
      - description: Controller clock
      - description: DMA clock
      - description: ARB clock for multi-master when a bus has more than
          one i2c controllers
      - description: PMIC clock. Only when mediatek,have-pmic is set.

  clock-names:
    minItems: 2
    maxItems: 4
    items:
      - const: main
      - const: dma
      - const: arb
      - const: pmic

  mediatek,have-pmic:
    $ref: /schemas/types.yaml#/definitions/flag
    description: Platform can control I2C from the PMIC

  mediatek,use-push-pull:
    $ref: /schemas/types.yaml#/definitions/flag
    description: IO config use push-pull mode.

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - clock-names
  - clock-div

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    i2c0: i2c@1100d000 {
            compatible = "mediatek,mt6577-i2c";
            reg = <0x1100d000 0x70>,
                  <0x11000300 0x80>;
            interrupts = <GIC_SPI 44 IRQ_TYPE_LEVEL_LOW>;
            clock-frequency = <400000>;
            mediatek,have-pmic;
            clock-div = <16>;
            clocks = <&i2c0_ck>, <&ap_dma_ck>;
            clock-names = "main", "dma";
    };
