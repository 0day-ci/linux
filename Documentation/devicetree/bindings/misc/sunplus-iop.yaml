# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright (C) Sunplus Ltd. Co. 2021
%YAML 1.2
---
$id: http://devicetree.org/schemas/misc/sunplus-iop.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Sunplus IOP(8051) controller

maintainers:
  - Tony Huang <tonyhuang.sunplus@gmail.com>

description: |
  Processor for I/O control, RTC wake-up procedure management,
  and cooperation with CPU&PMC in power management.

properties:
  compatible:
    enum:
      - sunplus,sp7021-iop

  reg:
    items:
      - description: IOP registers regions
      - description: PMC registers regions
      - description: MOON0 registers regions

  reg-names:
    items:
      - const: iop
      - const: iop_pmc
      - const: moon0

  interrupts:
    items:
      - description: IOP_INT0. IOP to system Interrupt 0.
                     Sent by IOP to system RISC.
      - description: IOP_INT1. IOP to System Interrupt 1.
                     Sent by IOP to system RISC.

  memory-region:
    maxItems: 1

  wakeup-gpios:
    description: When the linux kernel system is powered off.
      8051 is always powered. 8051 cand receive external signals
      according to this gpio pin. 8051 receives external signal
      through gpio pin. 8051 can power on linux kernel system.

required:
  - compatible
  - reg
  - reg-names
  - interrupts
  - memory-region
  - wakeup-gpios

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/gpio/gpio.h>
    iop: iop@9c000400 {
        compatible = "sunplus,sp7021-iop";
        reg = <0x9c000400 0x80>, <0x9c003100 0x80>, <0x9c000000 0x80>;
        reg-names = "iop", "iop_pmc", "moon0";
        interrupt-parent = <&intc>;
        interrupts = <41 IRQ_TYPE_LEVEL_HIGH>, <42 IRQ_TYPE_LEVEL_HIGH>;
        memory-region = <&iop_reserve>;
        pinctrl-names = "default";
        pinctrl-0 = <&iop_pins>;
        wakeup-gpios = <&pctl 1 GPIO_ACTIVE_HIGH>;
    };
...
