# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/interrupt-controller/realtek,rtl-intc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Realtek RTL SoC interrupt controller devicetree bindings

description:
  Interrupt router for Realtek MIPS SoCs, allowing up to 32 SoC interrupts to
  be routed to one of up to 15 parent interrupts, or left disconnected.

maintainers:
  - Birger Koblitz <mail@birger-koblitz.de>
  - Bert Vermeulen <bert@biot.com>
  - John Crispin <john@phrozen.org>

properties:
  compatible:
    const: realtek,rtl-intc

  "#interrupt-cells":
    const: 1

  reg:
    maxItems: 1

  interrupts:
    minItems: 1
    maxItems: 15
    description:
      List of parent interrupts, in the order that they are connected to this
      interrupt router's outputs.

  interrupt-controller: true

  "#address-cells":
    const: 0

  interrupt-map:
    description:
      List of <soc_int parent_phandle parent_args ...> tuples, where "soc_int"
      is the interrupt input line number as provided by this controller.
      "parent_phandle" and "parent_args" specify which parent interrupt this
      line should be routed to. Note that interrupt specifiers should be
      identical to the parents specified in the "interrupts" property.

  realtek,output-valid-mask:
    $ref: /schemas/types.yaml#/definitions/uint32
    description:
      Optional bit mask indicating which outputs are connected to the parent
      interrupts. The lowest set bit indicates which output line the first
      interrupt from "interrupts" is connected to, the second lowest set bit
      for the second interrupt, etc. If not provided, parent interrupts will be
      assigned sequentially to the outputs.

required:
  - compatible
  - reg
  - "#interrupt-cells"
  - interrupt-controller
  - "#address-cells"
  - interrupt-map
  - interrupts

additionalProperties: false

examples:
  - |
    intc: interrupt-controller@3000 {
      compatible = "realtek,rtl-intc";
      #interrupt-cells = <1>;
      interrupt-controller;
      reg = <0x3000 0x20>;

      interrupt-parent = <&cpuintc>;
      interrupts = <1>, <2>, <5>;
      realtek,output-valid-mask = <0x13>;

      #address-cells = <0>;
      interrupt-map =
              <31 &cpuintc 2>, /* connect to cpuintc 2 via output 1 */
              <30 &cpuintc 1>, /* connect to cpuintc 1 via output 0 */
              <29 &cpuintc 5>; /* connect to cpuintc 5 via output 4 */
    };
