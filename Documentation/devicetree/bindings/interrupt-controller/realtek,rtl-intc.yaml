# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/interrupt-controller/realtek,rtl-intc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Realtek RTL SoC interrupt controller devicetree bindings

description:
  Interrupt router for Realtek MIPS SoCs, allowing up to 32 SoC interrupts to
  be routed to one of up to 15 parent interrupts, or left disconnected. Most
  commonly, the CPU's six hardware interrupts are used as parent interrupts.

maintainers:
  - Birger Koblitz <mail@birger-koblitz.de>
  - Bert Vermeulen <bert@biot.com>
  - John Crispin <john@phrozen.org>

properties:
  compatible:
    const: realtek,rtl-intc

  reg:
    maxItems: 1

  "#interrupt-cells":
    const: 1

  interrupt-controller: true

  interrupts:
    minItems: 1
    maxItems: 15
    description:
      List of interrupts where SoC interrupts inputs can be routed to. Must be
      provided in the same order as the output lines. The first interrupt is
      thus selected via routing value 0, etc.

  realtek,interrupt-routing:
    $ref: /schemas/types.yaml#/definitions/uint32-matrix
    description:
      List of <soc_int irq_idx> pairs, where "soc_int" is the interrupt line
      number as provided by this controller. "irq_idx" is the index of the
      interrupt in the list as specified the interrupts property.
    items:
      items:
        - description: SoC interrupt index
        - description: parent interrupt index

required:
  - compatible
  - reg
  - "#interrupt-cells"
  - interrupt-controller
  - interrupts
  - realtek,interrupt-routing

additionalProperties: false

examples:
  - |
    intc: interrupt-controller@3000 {
      compatible = "realtek,rtl-intc";
      #interrupt-cells = <1>;
      interrupt-controller;
      reg = <0x3000 0x20>;

      interrupt-parent = <&cpu_intc>;
      interrupts = <2>, <3>, <4>;
      realtek,interrupt-routing =
              <31 0>, /* route to cpu_intc interrupt 2 */
              <30 1>, /* route to cpu_intc interrupt 3 */
              <29 2>; /* route to cpu_intc interrupt 4 */
    };
