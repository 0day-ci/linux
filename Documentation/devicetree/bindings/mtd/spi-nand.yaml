# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/mtd/spi-nand.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: SPI NAND flash

maintainers:
  - Apurva Nandan <a-nandan@ti.com>

allOf:
  - $ref: "mtd.yaml#"

properties:
  compatible:
    oneOf:
      - const: spi-nand

  reg:
    items:
      description:
        should encode the chip-select line used to access the NAND chip

  spi-max-frequency: true
  spi-rx-bus-width: true
  spi-tx-bus-width: true

  partitions:
    type: object

  '#address-cells': true
  '#size-cells': true

patternProperties:
  # Note: use 'partitions' node for new users
  '^partition@':
    type: object

  "^otp(-[0-9]+)?$":
    type: object

additionalProperties: false

examples:
  - |
    spi {
        #address-cells = <1>;
        #size-cells = <0>;

        flash@6 {
            #address-cells = <1>;
            #size-cells = <1>;
            compatible = "spi-nand";
            reg = <0x6>;
            spi-max-frequency = <42000000>;

            partitions {
                compatible = "fixed-partitions";
                #address-cells = <1>;
                #size-cells = <1>;

                partition@0 {
                    label = "boot";
                    reg = <0 0x200000>;
                };

                partition@200000 {
                    label = "rootfs";
                    reg = <0x200000 0xce0000>;
                };
            };
        };
    };
