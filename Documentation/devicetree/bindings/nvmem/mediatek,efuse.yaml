# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/nvmem/mediatek,efuse.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: MediaTek efuse device tree bindings

description: |
  MediaTek's efuse is used for storing calibration data, it can be accessed
  on ARM devices usiong I/O mapped memory.

maintainers:
  - Andrew-CT Chen <andrew-ct.chen@mediatek.com>

allOf:
  - $ref: "nvmem.yaml#"

properties:
  $nodename:
    pattern: "^efuse@[0-9a-f]+$"

  compatible:
    oneOf:
      - items:
          - enum:
              - mediatek,mt7622-efuse
              - mediatek,mt7623-efuse
              - mediatek,mt8173-efuse
              - mediatek,mt8192-efuse
              - mediatek,mt8195-efuse
              - mediatek,mt8516-efuse
          - const: mediatek,efuse
      - const: mediatek,mt8173-efuse
        deprecated: true

  reg:
    maxItems: 1

  "#address-cells":
    const: 1

  "#size-cells":
    const: 1

patternProperties:
  "^.*@[0-9a-f]+$":
    type: object

    properties:
      reg:
        maxItems: 1

      bits:
        maxItems: 1

    required:
      - reg

    additionalProperties: false

required:
  - compatible
  - reg

unevaluatedProperties: false

examples:
  - |
    efuse@10206000 {
        compatible = "mediatek,mt8173-efuse";
        reg = <0x10206000 0x1000>;
        #address-cells = <1>;
        #size-cells = <1>;

        u2_intr_p0: usb2-intr-p0@188 {
            reg = <0x188 0x1>;
            bits = <0 5>;
        };

        u2_intr_p1: usb2-intr-p1@188 {
            reg = <0x188 0x2>;
            bits = <5 5>;
        };

        thermal_calibration: calib@528 {
            reg = <0x528 0xc>;
        };
    };
