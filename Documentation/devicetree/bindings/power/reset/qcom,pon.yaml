# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/power/reset/qcom,pon.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Qualcomm PON Device

maintainers:
  - Vinod Koul <vkoul@kernel.org>

description: |
  The Power On device for Qualcomm PM8xxx is MFD supporting pwrkey
  and resin along with the Android reboot-mode.

properties:
  compatible:
    enum:
      - qcom,pm8916-pon
      - qcom,pms405-pon
      - qcom,pm8998-pon

  reg:
    maxItems: 1

  qcom,mode-in-imem:
    description: Reboot mode is stored in IMEM rather than PON register
    type: boolean

patternProperties:
  "^mode-.+":
    $ref: /schemas/types.yaml#/definitions/uint32
    description: Vendor-specific mode value written to the mode register

required:
  - compatible
  - reg

additionalProperties: false

examples:
  # Example 1: Reboot mode is stored in PON register
  - |
    pmic {
        #address-cells = <1>;
        #size-cells = <0>;

        pon@800 {
            compatible = "qcom,pm8916-pon";
            reg = <0x800>;
            mode-bootloader = <0x2>;
            mode-recovery = <0x1>;
        };
    };
  # Example 2: Reboot mode is stored in IMEM
  - |
    pmic {
        #address-cells = <1>;
        #size-cells = <0>;

        pon@800 {
            compatible = "qcom,pm8916-pon";
            reg = <0x860065c>;
            qcom,mode-in-imem;
            mode-bootloader = <0x77665500>;
            mode-recovery = <0x77665502>;
        };
    };
