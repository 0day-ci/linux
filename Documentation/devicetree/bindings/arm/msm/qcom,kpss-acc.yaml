# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/arm/msm/qcom,kpss-acc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Krait Processor Sub-system (KPSS) Application Clock Controller (ACC)

maintainers:
  - Ansuel Smith <ansuelsmth@gmail.com>

description: |
  The KPSS ACC provides clock, power domain, and reset control to a Krait CPU.
  There is one ACC register region per CPU within the KPSS remapped region as
  well as an alias register region that remaps accesses to the ACC associated
  with the CPU accessing the region.

properties:
  compatible:
    enum:
      - qcom,kpss-acc-v1
      - qcom,kpss-acc-v2

  reg:
    items:
      - description: Base address and size of the register region
      - description: Optional base address and size of the alias register region

  clocks:
    items:
      - description: phandle to pll8_vote
      - description: phandle to pxo_board

  clock-names:
    items:
      - const: pll8_vote
      - const: pxo

  clock-output-names:
    description: Name of the aux clock. Krait can have at most 4 cpu.
    enum:
      - acpu0_aux
      - acpu1_aux
      - acpu2_aux
      - acpu3_aux

  '#clock-cells':
    const: 0

required:
  - compatible
  - reg

allOf:
  - if:
      properties:
        compatible:
          contains:
            const: qcom,kpss-acc-v1
      then:
        required:
          - clocks
          - clock-names
          - clock-output-names
          - '#clock-cells'

additionalProperties: false

examples:
  - |
    #include <dt-bindings/clock/qcom,gcc-ipq806x.h>

    clock-controller@2088000 {
      compatible = "qcom,kpss-acc-v1";
      reg = <0x02088000 0x1000>, <0x02008000 0x1000>;
      clocks = <&gcc PLL8_VOTE>, <&pxo_board>;
      clock-names = "pll8_vote", "pxo";
      clock-output-names = "acpu0_aux";
      #clock-cells = <0>;
    };

    clock-controller@2098000 {
      compatible = "qcom,kpss-acc-v1";
      reg = <0x02098000 0x1000>, <0x02008000 0x1000>;
      clock-output-names = "acpu1_aux";
      clocks = <&gcc PLL8_VOTE>, <&pxo_board>;
      clock-names = "pll8_vote", "pxo";
      #clock-cells = <0>;
    };

  - |
    clock-controller@f9088000 {
      compatible = "qcom,kpss-acc-v2";
      reg = <0xf9088000 0x1000>,
            <0xf9008000 0x1000>;
    };
...
