# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/soc/qcom/qcom,gpr.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: Qualcomm Generic Packet Router binding

maintainers:
  - Srinivas Kandagatla <srinivas.kandagatla@linaro.org>

description: |
  This binding describes the Qualcomm Generic Packet Router,Shared Memory Manager,
  used to send and receive packets between Audio DSP and Application processor.

properties:
  compatible:
    const: qcom,gpr

  qcom,glink-channels:
    const: adsp_apps
    description:
      glink channel associated with gpr function

  qcom,protection-domain:
    $ref: /schemas/types.yaml#/definitions/string-array
    description: protection domain service name and path for gpr service
      has dependency on.
    items:
      - const: avs/audio
      - const: msm/adsp/audio_pd

  qcom,gpr-domain:
    $ref: /schemas/types.yaml#/definitions/uint32
    enum: [1, 2, 3]
    description:
      Selects the processor domain for gpr
        1 = Modem Domain
        2 = Audio DSP Domain
        3 = Application Processor Domain

  '#address-cells':
    const: 1

  '#size-cells':
    const: 0

#GPR Services
patternProperties:
  'gprservice@[0-9]+$':
    type: object
    description:
      GPR node's client devices use subnodes for desired static port services.

    properties:
      reg:
        maxItems: 1
        description: Service port id

    additionalProperties: false

required:
  - compatible
  - qcom,glink-channels
  - qcom,gpr-domain

additionalProperties: false

examples:
  - |
    #include <dt-bindings/soc/qcom,gpr.h>
    gpr {
        compatible = "qcom,gpr";
        qcom,glink-channels = "adsp_apps";
        qcom,gpr-domain = <GPR_DOMAIN_ID_ADSP>;
        qcom,protection-domain = "avs/audio", "msm/adsp/audio_pd";
        #address-cells = <1>;
        #size-cells = <0>;

        gprservice@1 {
          reg = <GPR_APM_MODULE_IID>;
        };
    };
