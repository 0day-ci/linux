# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/sound/qcom,q6dsp-audio-stream.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: Qualcomm DSP Audio Stream binding

maintainers:
  - Srinivas Kandagatla <srinivas.kandagatla@linaro.org>

description: |
  This binding describes the Qualcomm DSP Audio stream

properties:
  compatible:
    enum:
      - qcom,q6asm-dais
      - qcom,q6apm-dais

  reg:
    maxItems: 1

  '#sound-dai-cells':
    const: 1

  '#address-cells':
    const: 1

  '#size-cells':
    const: 0

#Digital Audio Interfaces
patternProperties:
  '^dai@[0-9]+$':
    type: object
    description:
      Q6DSP Audio Stream Digital Audio Interfaces.

    properties:
      reg:
        description:
          Digital Audio Interface ID

      direction:
        $ref: /schemas/types.yaml#/definitions/uint32
        enum: [0, 1, 2]
        description:
          Compress DAI direction
            0 = bi-directional
            1 = tx only
            2 = rx only

      is-compress-dai:
        type: boolean
        description:
          Indicate if DAI is for compress offload

    required:
      - reg

    additionalProperties: false

required:
  - compatible
  - reg
  - "#sound-dai-cells"
  - "#address-cells"
  - "#size-cells"

additionalProperties: false

examples:
  - |
    #include <dt-bindings/soc/qcom,apr.h>
    apr {
        #address-cells = <1>;
        #size-cells = <0>;
        apr-service@7 {
            reg = <APR_SVC_ASM>;
            #address-cells = <1>;
            #size-cells = <0>;
            q6asmdai@1 {
              compatible = "qcom,q6asm-dais";
              reg = <1>;
              #address-cells = <1>;
              #size-cells = <0>;
              #sound-dai-cells = <1>;

              dai@1 {
                reg = <1>;
                is-compress-dai;
              };
            };
        };
      };
  - |
    #include <dt-bindings/soc/qcom,gpr.h>
    gpr {
        #address-cells = <1>;
        #size-cells = <0>;
        gpr-service@1 {
            reg = <GPR_APM_MODULE_IID>;
            #address-cells = <1>;
            #size-cells = <0>;
            q6apmdai@1 {
              compatible = "qcom,q6apm-dais";
              reg = <1>;
              #address-cells = <1>;
              #size-cells = <0>;
              #sound-dai-cells = <1>;

              dai@1 {
                reg = <1>;
              };
            };
        };
      };
