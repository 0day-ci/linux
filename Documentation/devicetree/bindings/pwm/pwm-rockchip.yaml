# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$id: http://devicetree.org/schemas/pwm/pwm-rockchip.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Rockchip PWM controller

maintainers:
  - Heiko Stuebner <heiko@sntech.de>

properties:
  compatible:
    oneOf:
      - const: rockchip,rk2928-pwm
      - const: rockchip,rk3288-pwm
      - const: rockchip,vop-pwm
      - items:
          - enum:
              - rockchip,rv1108-pwm
          - const: rockchip,rk3288-pwm

  reg:
    maxItems: 1

  clocks:
    minItems: 1
    maxItems: 2
    description:
      For older hardware (rk2928, rk3066, rk3188, rk3228, rk3288, rk3399)
        There is one clock that is used both to derive the functional clock
        for the device and as the bus clock.
      For newer hardware (rk3328 and future SoCs) that is also specified
      with clock names.
        "pwm" is used to derive the functional clock for the device.
        "pclk" is used as the APB bus clock.

  clock-names:
    minItems: 1
    items:
      - const: pwm
      - const: pclk

  "#pwm-cells":
    enum: [2, 3]
    description:
      Must be 2 (rk2928) or 3 (rk3288).
      See pwm.yaml for a description of the cell format.

additionalProperties: false

required:
  - compatible
  - reg
  - clocks
  - "#pwm-cells"

examples:
  - |
    #include <dt-bindings/clock/rk3188-cru-common.h>
    pwm0: pwm@20030000 {
      compatible = "rockchip,rk2928-pwm";
      reg = <0x20030000 0x10>;
      clocks = <&cru PCLK_PWM01>;
      #pwm-cells = <2>;
    };
